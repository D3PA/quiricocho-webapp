<div class="app-container">
  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-container">
      <!-- Logo -->
      <div class="nav-brand">
        <a class="logo" [routerLink]="authService.isAuthenticated() ? '/dashboard' : '/login'">
          <img src="assets/images/logo.webp" alt="Quiricocho" class="logo-image">
        </a>
      </div>

      <!-- Navegacion para desktop -->
      <div class="nav-links" *ngIf="authService.isAuthenticated()">
        <a class="nav-link" routerLink="/dashboard" routerLinkActive="active">
          <mat-icon>home</mat-icon>
          <span>Inicio</span>
        </a>
        <a class="nav-link" routerLink="/players" routerLinkActive="active">
          <mat-icon>sports_soccer</mat-icon>
          <span>Jugadores</span>
        </a>
        <a class="nav-link" routerLink="/players/create" routerLinkActive="active">
          <mat-icon>person_add</mat-icon>
          <span>Crear Jugador</span>
        </a>
        <a class="nav-link" routerLink="/players/import" routerLinkActive="active" 
           *ngIf="(authService.currentUser$ | async)?.is_admin">
          <mat-icon>file_upload</mat-icon>
          <span>Importar Jugadores</span>
        </a>
      </div>

      <!-- Acciones desktop -->
      <div class="nav-actions">
        <!-- Botones cuando NO esta autenticado - DESKTOP -->
        <div class="auth-buttons desktop-auth" *ngIf="!authService.isAuthenticated()">
          <a mat-button routerLink="/login" class="nav-auth-btn login-btn">
            <mat-icon>login</mat-icon>
            <span>Iniciar Sesi贸n</span>
          </a>
          <a mat-raised-button routerLink="/register" class="nav-auth-btn register-btn">
            <mat-icon>person_add</mat-icon>
            <span>Registrarse</span>
          </a>
        </div>

        <!-- Menu usuario cuando si esta autenticado - DESKTOP -->
        <div class="user-menu desktop-user" *ngIf="authService.isAuthenticated()">
          <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-btn">
            <mat-icon>account_circle</mat-icon>
          </button>
          <mat-menu #userMenu="matMenu" class="user-dropdown">
            <div mat-menu-item disabled *ngIf="authService.currentUser$ | async as user">
              <mat-icon>person</mat-icon>
              <div class="user-info">
                <span class="user-name">{{ user.name || user.email }}</span>
                <span class="user-email">{{ user.email }}</span>
                <span class="user-role" *ngIf="user.is_admin">Administrador</span>
              </div>
            </div>
            <mat-divider></mat-divider>
            <button mat-menu-item (click)="logout()">
              <mat-icon>logout</mat-icon>
              <span>Cerrar Sesi贸n</span>
            </button>
          </mat-menu>
        </div>

        <!-- Boton menu hamburguesa - MOBILE -->
        <button mat-icon-button class="menu-toggle" (click)="toggleMobileMenu()" *ngIf="!authService.isAuthenticated() || isMobile">
          <mat-icon>{{ isMobileMenuOpen ? 'close' : 'menu' }}</mat-icon>
        </button>
      </div>
    </div>

    <!-- Menu mobile -->
    <div class="mobile-menu" [class.open]="isMobileMenuOpen" *ngIf="isMobileMenuOpen">
      <!-- Cuando NO esta autenticado -->
      <div class="mobile-auth-section" *ngIf="!authService.isAuthenticated()">
        <a class="mobile-nav-link" routerLink="/login" (click)="closeMobileMenu()">
          <mat-icon>login</mat-icon>
          <span>Iniciar Sesi贸n</span>
        </a>
        <a class="mobile-nav-link" routerLink="/register" (click)="closeMobileMenu()">
          <mat-icon>person_add</mat-icon>
          <span>Registrarse</span>
        </a>
      </div>

      <!-- Cuando SI esta autenticado -->
      <div class="mobile-nav-section" *ngIf="authService.isAuthenticated()">
        <a class="mobile-nav-link" routerLink="/dashboard" (click)="closeMobileMenu()">
          <mat-icon>home</mat-icon>
          <span>Inicio</span>
        </a>
        <a class="mobile-nav-link" routerLink="/players" (click)="closeMobileMenu()">
          <mat-icon>sports_soccer</mat-icon>
          <span>Jugadores</span>
        </a>
        <a class="mobile-nav-link" routerLink="/players/create" (click)="closeMobileMenu()">
          <mat-icon>person_add</mat-icon>
          <span>Crear Jugador</span>
        </a>
        <a class="mobile-nav-link" routerLink="/players/import" (click)="closeMobileMenu()" 
           *ngIf="(authService.currentUser$ | async)?.is_admin">
          <mat-icon>file_upload</mat-icon>
          <span>Importar Jugadores</span>
        </a>
        
        <div class="mobile-user-info" *ngIf="authService.currentUser$ | async as user">
          <div class="user-details">
            <mat-icon>account_circle</mat-icon>
            <div class="user-text">
              <span class="user-name">{{ user.name || user.email }}</span>
              <span class="user-email">{{ user.email }}</span>
              <span class="user-role" *ngIf="user.is_admin">Administrador</span>
            </div>
          </div>
          <button class="mobile-logout-btn" (click)="logout(); closeMobileMenu()">
            <mat-icon>logout</mat-icon>
            <span>Cerrar Sesi贸n</span>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Contenido principal -->
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="footer-content">
      <div class="footer-logo">
        <img src="assets/images/logo.webp" alt="Quiricocho" class="footer-logo-img" style="height: 30px;">
      </div>
      <div class="footer-copy">
        &copy; 2025 Quiricocho. Todos los derechos reservados.
      </div>
    </div>
  </footer>
</div>